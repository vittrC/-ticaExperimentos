<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teste de √âtica no Trabalho</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>

<div id="profileContainer" onclick="backToMenu()">
  <img id="profileImage" src="img/img1.png" alt="Foto de Perfil">
</div>

<div class="container" id="menu">
  <h1>Teste de √âtica no Ambiente de Trabalho</h1>
  <p>Bem-vindo ao simulador de dilemas √©ticos, aqui ser√° testada toda sua integridade como ser. Boa sorte!</p>
  <button class="btn" onclick="startGame()">Iniciar o Jogo</button>
  <button class="btn" onclick="showInstructions()">Instru√ß√µes</button>
  <button class="btn" onclick="showProfileSelection()">Alterar Avatar</button>
  
  <div class="simple-score">
    <p>üèÜ Recorde: <span id="highScoreValue">0</span></p>
    <p>√öltima pontua√ß√£o: <span id="lastScoreValue">0</span></p>
    <button id="resetScoreBtn" class="reset-btn" onclick="showResetConfirmation()">Resetar Pontua√ß√£o</button>
    <div id="resetConfirm" class="reset-confirm hidden">
      Tem certeza que deseja resetar o recorde?
      <div class="reset-options">
        <button class="btn" onclick="resetHighScore()">Sim</button>
        <button class="reset-btn" onclick="hideResetConfirmation()">N√£o</button>
      </div>
    </div>
  </div>
</div>

<div class="container hidden" id="profileSelection">
  <h2>Escolha seu Avatar</h2>
  <div class="profile-grid">
    <img src="img/img1.png" class="profile-option" onclick="selectProfile('1')">
    <img src="img/img2.png" class="profile-option" onclick="selectProfile('2')">
    <img src="img/img3.png" class="profile-option" onclick="selectProfile('3')">
    <img src="img/img4.png" class="profile-option" onclick="selectProfile('4')">
    <img src="img/img5.png" class="profile-option" onclick="selectProfile('5')">
    <img src="img/img6.png" class="profile-option" onclick="selectProfile('6')">
  </div>
  <button class="btn" onclick="hideProfileSelection()">Voltar</button>
</div>

<div class="container hidden" id="instructions">
  <h2>Instru√ß√µes</h2>
  <p>
    Enfrente dilemas que podem ocorrer num ambiente de trabalho.<br>
    Cada decis√£o pode aumentar sua moral ou acabar te dando a fama de um exemplo do que N√ÉO fazer.
  </p>
  <button class="btn" onclick="backToMenu()">Voltar ao Menu</button>
</div>

<div class="container hidden" id="game">
  <h2><span class="icon-number" id="questionNumber">1</span><span id="questionTitle">Quest√£o</span></h2>
  <img id="questionGif" src="" alt="GIF da Quest√£o">
  <p id="questionText">Texto da pergunta...</p>
  <div id="answers"></div>
</div>

<div class="container hidden" id="result">
  <h2>üèÅ Resultado Final</h2>
  
  <div style="display: flex; align-items: center; justify-content: center; gap: 30px; margin: 20px 0;">
    <div style="text-align: center;">
      <img id="resultAvatar" src="img/img1.png" style="width: 120px; height: 120px; border-radius: 50%; border: 3px solid #00ff00; box-shadow: 0 0 20px #00ff00;">
    </div>
    
    <div style="text-align: center;">
      <div style="font-size: 2.5em; color: #ffff00; text-shadow: 0 0 10px #ffff00; margin-bottom: 10px;">
        <span id="finalScoreValue">0</span>/<span id="totalPossibleScore">3000</span>
      </div>
      <div style="background: rgba(0, 255, 0, 0.2); padding: 10px; border-radius: 10px;">
        <p style="font-size: 1.1em;">Pontua√ß√£o M√°xima: <span id="highScoreDisplay">0</span></p>
      </div>
    </div>
  </div>

  <div id="scoreMeter" style="height: 20px; background: rgba(0, 255, 0, 0.2); border-radius: 10px; margin: 20px 0; overflow: hidden;">
    <div id="scoreProgress" style="height: 100%; background: linear-gradient(90deg, #00ff00, #00ff88); width: 0%; transition: width 1s ease;"></div>
  </div>

  <p id="finalMessage" style="font-size: 1.3em; margin: 20px 0; min-height: 60px;"></p>
  
  <div style="margin-top: 30px;">
    <button class="btn" onclick="backToMenu()">Voltar ao Menu</button>
  </div>
</div>

<script>

function showResetConfirmation() {
  document.getElementById("resetConfirm").classList.remove("hidden");
  document.getElementById("resetScoreBtn").classList.add("hidden");
}

function hideResetConfirmation() {
  document.getElementById("resetConfirm").classList.add("hidden");
  document.getElementById("resetScoreBtn").classList.remove("hidden");
}

function resetHighScore() {
  highScore = 0;
  localStorage.setItem('highScore', highScore);
  updateScoreDisplay();
  hideResetConfirmation();
  
  const feedback = document.createElement('div');
  feedback.textContent = 'Recorde resetado!';
  feedback.style.position = 'fixed';
  feedback.style.top = '50%';
  feedback.style.left = '50%';
  feedback.style.transform = 'translate(-50%, -50%)';
  feedback.style.color = '#ff0000';
  feedback.style.fontSize = '1.5em';
  feedback.style.textShadow = '0 0 8px #ff0000';
  feedback.style.zIndex = '1000';
  feedback.style.animation = 'fadeOut 1.5s forwards';
  feedback.style.pointerEvents = 'none'; 
  
  document.body.appendChild(feedback);
  
  setTimeout(() => {
    feedback.remove();
  }, 1500);
}


// Constantes
const POINTS_PER_CORRECT = 150;
const PROFILE_IMAGES = {
  '1': 'img/img1.png',
  '2': 'img/img2.png',
  '3': 'img/img3.png',
  '4': 'img/img4.png',
  '5': 'img/img5.png',
  '6': 'img/img6.png'
};

let currentQuestion = 0;
let score = 0;
let currentProfile = '1';
let highScore = localStorage.getItem('highScore') || 0;
let lastScore = localStorage.getItem('lastScore') || 0;

const questions = [
  [
  {
    "title": "Acidente da Gelatina",
    "text": "Em um dia comum, um colega denuncia outro por ter colocado seu grampeador em uma gelatina. Qual sua atitude?",
    "gif": "gifs/etica_q1.gif",
    "answers": [
      { "text": "A) Ri freneticamente enquanto aponta para o colega.", "ethical": false },
      { "text": "B) Recorre ao RH.", "ethical": true },
      { "text": "C) Espalha a hist√≥ria pelo escrit√≥rio, dando a ele o apelido de 'guloso'.", "ethical": false },
      { "text": "D) Re√∫ne os envolvidos para resolver discretamente.", "ethical": true }
    ]
  },
  {
    "title": "Ass√©dio no Trabalho",
    "text": "Durante uma ida √† cozinha, voc√™ v√™ seu colega constrangendo uma de suas colegas. O que voc√™ faz?",
    "gif": "gifs/etica_q2.gif",
    "answers": [
      { "text": "A) Conversa com o colega e diz que aquilo n√£o √© legal.", "ethical": true },
      { "text": "B) N√£o faz nada e finge que nada aconteceu.", "ethical": false },
      { "text": "C) Denuncia o comportamento para seus superiores.", "ethical": true }
    ]
  },
  {
    "title": "Identidade Falsa",
    "text": "Voc√™ descobre que seu velho colega usa um nome falso. O que voc√™ faz?",
    "gif": "gifs/etica_q3.gif",
    "answers": [
      { "text": "A) Confronta-o pessoalmente, adotando postura agressiva.", "ethical": false },
      { "text": "B) Reporta √†s autoridades.", "ethical": true },
      { "text": "C) Alerta seus colegas sobre a falsa identidade.", "ethical": false }
    ]
  },
  {
    "title": "Colega no Parque",
    "text": "Seu colega mente sobre estar doente para faltar ao trabalho e voc√™ descobre que ele foi ao parque. O que voc√™ faz?",
    "gif": "gifs/etica_q4.gif",
    "answers": [
      { "text": "A) ignora. √âtica n√£o √© seu forte.", "ethical": false },
      { "text": "B) dedura ele no grupo da firma com prints e marca o chefe.", "ethical": false },
      { "text": "C) Conversa com ele em particular e sugere que seja honesto da pr√≥xima vez.", "ethical": true },
      { "text": "D) vai tamb√©m ao parque e cobra a entrada em nome da empresa.", "ethical": false },
      { "text": "E) faz stories marcando ele e a empresa.", "ethical": false }
    ]
  },
  {
    "title": "SOS Plantas",
    "text": "Voc√™ descobre que o RH comprou plantas novas, mas ningu√©m rega. As plantas est√£o morrendo mais r√°pido que suas esperan√ßas de promo√ß√£o. Como agir?",
    "gif": "gifs/etica_q5.gif",
    "answers": [
      { "text": "A) Substitui as plantas por bonecos de papel e aguarda admira√ß√£o geral pela ‚Äúart installation‚Äù.", "ethical": false },
      { "text": "B) Derruba todas as plantas para que ningu√©m ‚Äúsofra com a morte delas‚Äù de novo.", "ethical": false },
      { "text": "C) Envia e-mail para toda a empresa: ‚ÄúSOS Vegeta√ß√£o Corporativa‚Äù.", "ethical": false },
      { "text": "D) Pega um regador e joga √°gua nas plantas dizendo ‚Äúsobrevivam como eu tento sobreviver aqui‚Äù.", "ethical": true }
    ]
  },
  {
    "title": "Reuni√£o do Caos",
    "text": "Durante uma reuni√£o, seu colega ativa um filtro de gato sem perceber e o chefe segue falando como se nada tivesse acontecido. O grupo est√° se segurando para n√£o rir. O que voc√™ faz?",
    "gif": "gifs/etica_q6.gif",
    "answers": [
      { "text": "A) Ria ao vivo, tira print e faz adesivo para o grupo da firma.", "ethical": false },
      { "text": "B) Fica s√©rio, ajuda seu colega discretamente e evita expor a situa√ß√£o mais do que j√° est√°.", "ethical": true },
      { "text": "C) Apresenta um PowerPoint com gr√°ficos sobre o impacto dos filtros no clima organizacional.", "ethical": false },
      { "text": "D) Manda mensagem no chat: ‚Äúmiau chefe, qual o pr√≥ximo passo?‚Äù.", "ethical": false }
    ]
  },
  {
    "title": "Caixa de Sugest√µes",
    "text": "A empresa colocou uma caixa de sugest√µes an√¥nimas. No primeiro dia, aparece um bilhete dizendo: 'socorro, prendo minha alma aqui todo dia'. O RH convoca uma investiga√ß√£o. Qual sua atitude √©tica?",
    "gif": "gifs/etica_q7.gif",
    "answers": [
      { "text": "A) Cria um canal no YouTube para ler todas as sugest√µes em voz dram√°tica.", "ethical": false },
      { "text": "B) Sugere ao RH que leve a sugest√£o a s√©rio e abra espa√ßo para ouvir os funcion√°rios sem puni√ß√£o.", "ethical": true },
      { "text": "C) Indica os suspeitos com base em quem mais parece estar √† beira de um colapso.", "ethical": false },
      { "text": "D) Escreve outro bilhete dizendo: ‚Äúminha alma est√° na m√°quina de caf√©, tragam incenso‚Äù.", "ethical": false }
    ]
  },
  {
    "title": "Perfume T√≥xico",
    "text": "Um funcion√°rio novo usa tanto perfume que o andar inteiro parece uma loja de cosm√©ticos. Pessoas come√ßam a espirrar, tossir e fazer reuni√µes no estacionamento. O que voc√™ faz?",
    "gif": "gifs/etica_q8.gif",
    "answers": [
      { "text": "A) Compra um purificador de ar e liga no m√°ximo toda vez que ele passa.", "ethical": false },
      { "text": "B) Conversa com ele em particular, com cuidado, explicando os efeitos sobre os colegas.", "ethical": true },
      { "text": "C) Faz uma par√≥dia de propaganda de perfume com ele como personagem principal.", "ethical": false },
      { "text": "D) Instala cartazes de ‚Äúproibido fragr√¢ncias n√≠vel apocalipse‚Äù.", "ethical": false }
    ]
  },
  {
    "title": "Sabotagem da Geladeira",
    "text": "Algu√©m colocou um peixe cru na geladeira da empresa como 'vingan√ßa' por furto de marmita. O ambiente agora tem cheiro de porto velho. Qual a atitude √©tica?",
    "gif": "gifs/etica_q9.gif",
    "answers": [
      { "text": "A) Coloca ventilador apontado pra dentro da geladeira pra ver se espalha o castigo.", "ethical": false },
      { "text": "B) Informa o RH sobre o ocorrido e prop√µe c√¢meras ou identifica√ß√£o de alimentos como solu√ß√£o.", "ethical": true },
      { "text": "C) Escreve em todas as marmitas: 'tocou, apodrece'.", "ethical": false },
      { "text": "D) Organiza um 'j√∫ri da geladeira' para descobrir o culpado.", "ethical": false }
    ]
  },
  {
    "title": "Elevador da Verdade",
    "text": "Durante uma pane, voc√™ e seu chefe ficam presos no elevador por 2 horas. Ele come√ßa a desabafar sobre decis√µes erradas e pede sua opini√£o sincera. O que voc√™ faz?",
    "gif": "gifs/etica_q10.gif",
    "answers": [
      { "text": "A) Diz: ‚ÄúFique tranquilo, se der tudo errado aqui dentro, a culpa ser√° da manuten√ß√£o‚Äù.", "ethical": false },
      { "text": "B) Oferece uma resposta honesta, mas com empatia, mostrando onde as decis√µes podem melhorar.", "ethical": true },
      { "text": "C) Finge desmaiar para n√£o participar da conversa.", "ethical": false },
      { "text": "D) Aproveita e apresenta um pitch de startup que ‚Äúmelhora chefes em tempo real‚Äù.", "ethical": false }
    ]
  },
  {
    "title": "Treinamento Humilhante",
    "text": "Voc√™ descobre que um curso obrigat√≥rio da empresa tem slides dos anos 90 e gifs de castores ‚Äòensinando‚Äô √©tica. Um novo funcion√°rio fica visivelmente constrangido. O que voc√™ faz?",
    "gif": "gifs/etica_q11.gif",
    "answers": [
      { "text": "A) Recria os slides com est√©tica de TikTok e envia para a diretoria.", "ethical": false },
      { "text": "B) D√° apoio ao novo colega, depois comunica ao setor respons√°vel sugerindo atualiza√ß√£o no conte√∫do.", "ethical": true },
      { "text": "C) Grita durante a aula: ‚ÄúO castor est√° certo, obede√ßam o roedor!‚Äù.", "ethical": false },
      { "text": "D) Cria um grupo paralelo chamado 'Sobreviventes do Castor √âtico'.", "ethical": false }
    ]
  },
  {
    "title": "Ambiente Silencioso Demais",
    "text": "A empresa implementa pol√≠tica de sil√™ncio absoluto para ‚Äòaumentar foco‚Äô. Agora todos se comunicam por post-its. Um colega come√ßa a desenvolver ansiedade com o ambiente. O que voc√™ faz?",
    "gif": "gifs/etica_q12.gif",
    "answers": [
      { "text": "A) Sugere ajustes na pol√≠tica, incluindo pausas para conversa e mais canais de express√£o saud√°veis.", "ethical": true },
      { "text": "B) Come√ßa a se comunicar apenas por m√≠mica exagerada.", "ethical": false },
      { "text": "C) Cola uma JBL no teto com som de floresta para ‚Äúquebrar o vazio‚Äù.", "ethical": false },
      { "text": "D) Escreve os bilhetes em caps lock e com emojis para simular gritos.", "ethical": false }
    ]
  },
  {
    "title": "Hack do Hor√°rio",
    "text": "Um funcion√°rio criou um sistema que registra ponto automaticamente mesmo quando ele est√° dormindo. Voc√™ descobre isso sem querer. O que faz?",
    "gif": "gifs/etica_q13.gif",
    "answers": [
      { "text": "A) D√° play em v√≠deos do YouTube com ronco de fundo e simula uma den√∫ncia an√¥nima.", "ethical": false },
      { "text": "B) Relata a fraude discretamente ao setor respons√°vel, preservando a seriedade do processo.", "ethical": true },
      { "text": "C) Oferece melhorar o c√≥digo dele em troca de parte dos lucros.", "ethical": false },
      { "text": "D) Tenta vender o c√≥digo como um servi√ßo para startups que ‚Äòvalorizam liberdade‚Äô.", "ethical": false }
    ]
  },
  {
    "title": "PowerPoint Comprometedor",
    "text": "Na apresenta√ß√£o da empresa, algu√©m acidentalmente abre um slide com print do grupo secreto dos colegas, cheio de apelidos para o chefe. O que fazer?",
    "gif": "gifs/etica_q14.gif",
    "answers": [
      { "text": "A) Encaminha o erro ao respons√°vel e sugere uma conversa madura com os envolvidos.", "ethical": true },
      { "text": "B) Aplaude e diz: ‚Äúfinalmente a transpar√™ncia que a gente queria‚Äù.", "ethical": false },
      { "text": "C) Faz o print virar papel de parede dos computadores da empresa.", "ethical": false },
      { "text": "D) Cria nova vers√£o do grupo com nomes de legumes e migra todos pra l√°.", "ethical": false }
    ]
  },
  {
    "title": "O Caso da Omelete",
    "text": "Em toda plena segunda-feira, a empresa oferece omelete de almo√ßo para os funcion√°rios. Os funcion√°rios suspeitam de que n√£o se trata de um omelete mas sim de uma massa preparada sabor omelete. Qual sua atitude?",
    "gif": "gifs/etica_q15.gif",
    "answers": [
      { "text": "A) Faz uma peti√ß√£o pedindo para trocar por ‚ÄúOmeletes de verdade‚Äù.", "ethical": false },
      { "text": "B) Conversa com o setor respons√°vel pela alimenta√ß√£o e sugere com respeito mais transpar√™ncia sobre os ingredientes dos pratos.", "ethical": true },
      { "text": "C) Sequestra uma galinha e corre pelado pela a cozinha enquanto grita ‚ÄúN√ìS QUEREMOS OVOS DE VERDADE‚Äù (tudo isso enquanto segura a galinha pelas pernas).", "ethical": false },
      { "text": "D) Simula um ataque de dejetos putridos usando pudim de chocolate, fazendo com que retirem o prato do cardapio.", "ethical": false }
    ]
  },
  {
    "title": "A Fritadeira do RH",
    "text": "O RH decide instalar uma fritadeira de pastel na sala de conviv√™ncia para melhorar o clima organizacional. Por√©m, o cheiro invade todo o escrit√≥rio e ningu√©m mais consegue se concentrar. O que fazer?",
    "gif": "gifs/etica_q16.gif",
    "answers": [
      { "text": "A) Coloca alarmes de inc√™ndio falsos perto da fritadeira at√© ela ser removida.", "ethical": false },
      { "text": "B) Conversa com o RH e prop√µe realocar a fritadeira para uma √°rea ventilada ou limitar os hor√°rios de uso.", "ethical": true },
      { "text": "C) Come√ßa a vender refrigerante na sua mesa e transforma o andar num food court.", "ethical": false },
      { "text": "D) Cria um abaixo-assinado exigindo frituras tem√°ticas por dia da semana.", "ethical": false }
    ]
  },
  {
  "title": "O Hacker da Impressora",
  "text": "Um colega descobre como imprimir sem que seu nome apare√ßa no sistema e come√ßa a usar isso para imprimir memes e cartas de amor n√£o solicitadas. O que voc√™ faz?",
  "gif": "gifs/etica_q17.gif",
  "answers": [
    { "text": "A) Conversa com ele sobre os riscos e sugere parar antes que algu√©m se prejudique.", "ethical": true },
    { "text": "B) Usa o sistema pra imprimir uma den√∫ncia an√¥nima... sobre o pr√≥prio sistema.", "ethical": false },
    { "text": "C) Responde √†s cartas de amor com cr√≠ticas gramaticais em vermelho.", "ethical": false },
    { "text": "D) Instala rastreamento na impressora e vende as provas para o RH.", "ethical": false }
  ]
},
{
  "title": "A Vassoura Voadora",
  "text": "Durante a faxina coletiva, um colega se recusa a participar alegando que 'n√£o foi contratado para limpar ch√£o'. Isso gera desconforto no grupo. Qual atitude voc√™ toma?",
  "gif": "gifs/etica_q18.gif",
  "answers": [
    { "text": "A) Conversa com ele sobre o esp√≠rito de equipe e sugere di√°logo com a lideran√ßa.", "ethical": true },
    { "text": "B) Escreve no ch√£o com sujeira: 'aqui jaz a colabora√ß√£o'.", "ethical": false },
    { "text": "C) Contrata um m√°gico para faz√™-lo ‚Äúdesaparecer‚Äù nas pr√≥ximas limpezas.", "ethical": false },
    { "text": "D) Joga sujeira s√≥ na mesa dele como ‚Äú√°rea exclusiva de aprendizado‚Äù.", "ethical": false }
  ]
},
{
  "title": "A Guerra dos Fones",
  "text": "Dois colegas entram em conflito por causa de volume alto nos fones. Um ouve rock, o outro podcast de crimes reais narrados pelo palha√ßo ca√ßarola. O clima fica tenso. Como agir?",
  "gif": "gifs/etica_q19.gif",
  "answers": [
    { "text": "A) Media a conversa entre eles e prop√µe regras de uso de fones e limites de volume.", "ethical": true },
    { "text": "B) Cria uma playlist com gritos de terror e bota no loop pra ver quem cede primeiro.", "ethical": false },
    { "text": "C) Instaura o 'dia do sil√™ncio total' como puni√ß√£o coletiva.", "ethical": false },
    { "text": "D) Transforma o conflito em novela e grava epis√≥dios no banheiro.", "ethical": false }
  ]
},
{
  "title": "O Caf√© dos Mortos",
  "text": "Algo estranho acontece no escrit√≥rio, o caf√© do chefe passou a ter um gosto estranho logo depois do sumi√ßo da urna funer√°ria da tia v√≥ de um dos funcion√°rios. O que voc√™ faz?",
  "gif": "gifs/etica_q20.gif",
  "answers": [
    { "text": "A) Alerta o chefe sobre o caf√© sabotado.", "ethical": true },
    { "text": "B) Distribui o caf√© para o resto do escrit√≥rio", "ethical": false },
    { "text": "C) Come√ßa a vender doses do caf√© no copinho por R$2,50.", "ethical": false },
    { "text": "D) Entrega o caf√© para o funcion√°rio dono da urna e o desmascara dizendo 'Gosto familiar n√©...'", "ethical": false }
  ]
}
]

]

function loadProfile() {
  const savedProfile = localStorage.getItem('profile');
  if (savedProfile) currentProfile = savedProfile;
  document.getElementById('profileImage').src = PROFILE_IMAGES[currentProfile];
  updateScoreDisplay();
}

function showProfileSelection() {
  document.getElementById("menu").classList.add("hidden");
  document.getElementById("profileSelection").classList.remove("hidden");
}

function hideProfileSelection() {
  document.getElementById("profileSelection").classList.add("hidden");
  document.getElementById("menu").classList.remove("hidden");
}

function selectProfile(profileId) {
  currentProfile = profileId;
  localStorage.setItem('profile', profileId);
  document.getElementById('profileImage').src = PROFILE_IMAGES[profileId];
  hideProfileSelection();
}

// Fun√ß√µes do jogo principal
function startGame() {
  document.getElementById("menu").classList.add("hidden");
  document.getElementById("game").classList.remove("hidden");
  currentQuestion = 0;
  score = 0;
  showQuestion();
}

function showQuestion() {
  const question = questions[currentQuestion];
  document.getElementById("questionNumber").textContent = currentQuestion + 1;
  document.getElementById("questionTitle").textContent = question.title;
  document.getElementById("questionText").textContent = question.text;
  document.getElementById("questionGif").src = question.gif;
  
  const answersDiv = document.getElementById("answers");
  answersDiv.innerHTML = "";
  question.answers.forEach(answer => {
    const btn = document.createElement("button");
    btn.className = "btn";
    btn.textContent = answer.text;
    btn.onclick = () => selectAnswer(answer.ethical);
    answersDiv.appendChild(btn);
  });
}

function selectAnswer(isEthical) {
  if (isEthical) score += POINTS_PER_CORRECT;
  currentQuestion++;
  if (currentQuestion < questions.length) {
    showQuestion();
  } else {
    showResult();
  }
}

function showResult() {
  lastScore = score;
  if (score > highScore) {
    highScore = score;
    localStorage.setItem('highScore', highScore);
  }
  localStorage.setItem('lastScore', lastScore);
  
  document.getElementById("game").classList.add("hidden");
  document.getElementById("result").classList.remove("hidden");
  
  document.getElementById("resultAvatar").src = PROFILE_IMAGES[currentProfile];
  
  const totalPoints = questions.length * POINTS_PER_CORRECT;
  
  animateValue("finalScoreValue", 0, score, 1000);
  document.getElementById("totalPossibleScore").textContent = totalPoints;
  document.getElementById("highScoreDisplay").textContent = highScore;
  
  const percentage = (score / totalPoints) * 100;
  setTimeout(() => {
    document.getElementById("scoreProgress").style.width = `${percentage}%`;
  }, 300);
  
  let message = "";
  if (percentage >= 90) message = "‚ú® √âtica Impec√°vel! Voc√™ √© um exemplo no ambiente de trabalho.";
  else if (percentage >= 70) message = "üîé Excelente! Suas decis√µes s√£o quase sempre corretas.";
  else if (percentage >= 50) message = "‚ö° Bom trabalho! Algumas escolhas poderiam ser melhores.";
  else if (percentage >= 30) message = "‚ö†Ô∏è Aten√ß√£o! Revise seus conceitos sobre √©tica profissional.";
  else message = "üö® Alerta! Suas decis√µes precisam de uma revis√£o urgente.";
  
  document.getElementById("finalMessage").textContent = message;
  
  updateScoreDisplay();
  
  localStorage.setItem("score_empatia", highScore);
}

// Fun√ß√£o para animar n√∫meros
function animateValue(id, start, end, duration) {
  const obj = document.getElementById(id);
  let startTimestamp = null;
  const step = (timestamp) => {
    if (!startTimestamp) startTimestamp = timestamp;
    const progress = Math.min((timestamp - startTimestamp) / duration, 1);
    obj.textContent = Math.floor(progress * (end - start) + start);
    if (progress < 1) {
      window.requestAnimationFrame(step);
    }
  };
  window.requestAnimationFrame(step);
}

// Fun√ß√µes de navega√ß√£o
function showInstructions() {
  document.getElementById("menu").classList.add("hidden");
  document.getElementById("instructions").classList.remove("hidden");
}

function backToMenu() {
  document.getElementById("instructions").classList.add("hidden");
  document.getElementById("result").classList.add("hidden");
  document.getElementById("game").classList.add("hidden");
  document.getElementById("profileSelection").classList.add("hidden");
  document.getElementById("menu").classList.remove("hidden");
  updateScoreDisplay();
}

// Fun√ß√£o para atualizar o placar
function updateScoreDisplay() {
  document.getElementById('highScoreValue').textContent = highScore;
  document.getElementById('lastScoreValue').textContent = lastScore;
}

window.onload = function() {
  loadProfile();
};

</script>
</body>
</html>