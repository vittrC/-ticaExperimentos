<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teste de √âtica no Trabalho</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<!-- √çcone de Perfil -->
<div id="profileContainer" onclick="backToMenu()">
  <img id="profileImage" src="img/img1.png" alt="Foto de Perfil">
</div>

<!-- Menu Principal -->
<div class="container" id="menu">
  <h1>Teste de √âtica no Ambiente de Trabalho</h1>
  <p>Bem-vindo ao simulador de dilemas √©ticos, aqui ser√° testada toda sua integridade como ser. Boa sorte!</p>
  <button class="btn" onclick="startGame()">Iniciar o Jogo</button>
  <button class="btn" onclick="showInstructions()">Instru√ß√µes</button>
  <button class="btn" onclick="showProfileSelection()">Alterar Avatar</button>
  
  <div class="simple-score">
    <p>üèÜ Recorde: <span id="highScoreValue">0</span></p>
    <p>√öltima pontua√ß√£o: <span id="lastScoreValue">0</span></p>
    <button id="resetScoreBtn" class="reset-btn" onclick="showResetConfirmation()">Resetar Pontua√ß√£o</button>
    <div id="resetConfirm" class="reset-confirm hidden">
      Tem certeza que deseja resetar o recorde?
      <div class="reset-options">
        <button class="btn" onclick="resetHighScore()">Sim</button>
        <button class="reset-btn" onclick="hideResetConfirmation()">N√£o</button>
      </div>
    </div>
  </div>
</div>

<!-- Sele√ß√£o de Perfil -->
<div class="container hidden" id="profileSelection">
  <h2>Escolha seu Avatar</h2>
  <div class="profile-grid">
    <img src="img/img1.png" class="profile-option" onclick="selectProfile('1')">
    <img src="img/img2.png" class="profile-option" onclick="selectProfile('2')">
    <img src="img/img3.png" class="profile-option" onclick="selectProfile('3')">
    <img src="img/img4.png" class="profile-option" onclick="selectProfile('4')">
    <img src="img/img5.png" class="profile-option" onclick="selectProfile('5')">
    <img src="img/img6.png" class="profile-option" onclick="selectProfile('6')">
  </div>
  <button class="btn" onclick="hideProfileSelection()">Voltar</button>
</div>

<!-- Instru√ß√µes -->
<div class="container hidden" id="instructions">
  <h2>Instru√ß√µes</h2>
  <p>
    Enfrente dilemas que podem ocorrer num ambiente de trabalho.<br>
    Cada decis√£o pode aumentar sua moral ou acabar te dando a fama de um exemplo do que N√ÉO fazer.
  </p>
  <button class="btn" onclick="backToMenu()">Voltar ao Menu</button>
</div>

<!-- Jogo -->
<div class="container hidden" id="game">
  <h2><span class="icon-number" id="questionNumber">1</span><span id="questionTitle">Quest√£o</span></h2>
  <img id="questionGif" src="" alt="GIF da Quest√£o">
  <p id="questionText">Texto da pergunta...</p>
  <div id="answers"></div>
</div>

<!-- Resultado -->
<div class="container hidden" id="result">
  <h2>üèÅ Resultado Final</h2>
  
  <div style="display: flex; align-items: center; justify-content: center; gap: 30px; margin: 20px 0;">
    <div style="text-align: center;">
      <img id="resultAvatar" src="img/img1.png" style="width: 120px; height: 120px; border-radius: 50%; border: 3px solid #00ff00; box-shadow: 0 0 20px #00ff00;">
    </div>
    
    <div style="text-align: center;">
      <div style="font-size: 2.5em; color: #ffff00; text-shadow: 0 0 10px #ffff00; margin-bottom: 10px;">
        <span id="finalScoreValue">0</span>/<span id="totalPossibleScore">3000</span>
      </div>
      <div style="background: rgba(0, 255, 0, 0.2); padding: 10px; border-radius: 10px;">
        <p style="font-size: 1.1em;">Pontua√ß√£o M√°xima: <span id="highScoreDisplay">0</span></p>
      </div>
    </div>
  </div>

  <div id="scoreMeter" style="height: 20px; background: rgba(0, 255, 0, 0.2); border-radius: 10px; margin: 20px 0; overflow: hidden;">
    <div id="scoreProgress" style="height: 100%; background: linear-gradient(90deg, #00ff00, #00ff88); width: 0%; transition: width 1s ease;"></div>
  </div>

  <p id="finalMessage" style="font-size: 1.3em; margin: 20px 0; min-height: 60px;"></p>
  
  <div style="margin-top: 30px;">
    <button class="btn" onclick="backToMenu()">Voltar ao Menu</button>
  </div>
</div>

<script>

function showResetConfirmation() {
  document.getElementById("resetConfirm").classList.remove("hidden");
  document.getElementById("resetScoreBtn").classList.add("hidden");
}

function hideResetConfirmation() {
  document.getElementById("resetConfirm").classList.add("hidden");
  document.getElementById("resetScoreBtn").classList.remove("hidden");
}

function resetHighScore() {
  highScore = 0;
  localStorage.setItem('highScore', highScore);
  updateScoreDisplay();
  hideResetConfirmation();
  
  // Feedback visual
  const feedback = document.createElement('div');
  feedback.textContent = 'Recorde resetado!';
  feedback.style.position = 'fixed';
  feedback.style.top = '50%';
  feedback.style.left = '50%';
  feedback.style.transform = 'translate(-50%, -50%)';
  feedback.style.color = '#ff0000';
  feedback.style.fontSize = '1.5em';
  feedback.style.textShadow = '0 0 8px #ff0000';
  feedback.style.zIndex = '1000';
  feedback.style.animation = 'fadeOut 1.5s forwards';
  feedback.style.pointerEvents = 'none'; 

  
  document.body.appendChild(feedback);
  
  setTimeout(() => {
    feedback.remove();
  }, 1500);
}


// Constantes
const POINTS_PER_CORRECT = 150;
const PROFILE_IMAGES = {
  '1': 'img/img1.png',
  '2': 'img/img2.png',
  '3': 'img/img3.png',
  '4': 'img/img4.png',
  '5': 'img/img5.png',
  '6': 'img/img6.png'
};

// Vari√°veis do jogo
let currentQuestion = 0;
let score = 0;
let currentProfile = '1';
let highScore = localStorage.getItem('highScore') || 0;
let lastScore = localStorage.getItem('lastScore') || 0;

// Perguntas do jogo 
const questions = [
  {
    title: "Acidente da Gelatina",
    text: "Em um dia comum, um colega denuncia outro por ter colocado seu grampeador em uma gelatina. Qual sua atitude?",
    gif: "gifs/gelatina.gif",
    answers: [
      { text: "A) Re√∫ne os envolvidos para resolver discretamente.", ethical: true },
      { text: "B) Ri freneticamente enquanto aponta para o colega.", ethical: false },
      { text: "C) Espalha a hist√≥ria pelo escrit√≥rio, dando a ele o apelido de 'guloso'.", ethical: false }
      ,{ text: "D) Recorre ao RH.", ethical: true }
    ]
  },
  {
    title: "Ass√©dio no Trabalho",
    text: "Durante uma ida √† cozinha, voc√™ v√™ seu colega constrangendo uma de suas colegas. O que voc√™ faz?",
    gif: "gifs/tarado.gif",
    answers: [
      { text: "A) Denuncia o comportamento para seus superiores.", ethical: true },
      { text: "B) N√£o faz nada e finge que nada aconteceu.", ethical: false },
      { text: "C) Conversa com o colega e diz que aquilo n√£o √© legal.", ethical: true }
    ]
  },
  {
    title: "Identidade Falsa",
    text: "Voc√™ descobre que seu velho colega usa um nome falso. O que voc√™ faz?",
    gif: "gifs/anonimo.gif",
    answers: [
      { text: "A) Reporta √†s autoridades.", ethical: true },
      { text: "B) Alerta seus colegas sobre a falsa identidade.", ethical: false },
      { text: "C) Confronta-o pessoalmente, adotando postura agressiva.", ethical: false }
    ]
  },
  {
    title: "Colega no Parque",
    text: "Seu colega mente sobre estar doente para faltar ao trabalho e voc√™ descobre que ele foi ao parque aqu√°tico. O que voc√™ faz?",
    gif: "gifs/etica_q1.gif",
    answers: [
      { text: "A) dedura ele no grupo da firma com prints e marca o chefe.", ethical: false },
      { text: "B) vai tamb√©m ao parque e cobra a entrada em nome da empresa.", ethical: false },
      { text: "C) faz stories marcando ele e a empresa.", ethical: false },
      { text: "D) ignora. √âtica n√£o √© seu forte.", ethical: false },
      { text: "E) Conversa com ele em particular e sugere que seja honesto da pr√≥xima vez.", ethical: true }
    ]
  },
  {
    title: "Caf√© com Rancor",
    text: "Voc√™ nota que o caf√© da firma est√° p√©ssimo‚Äîparece √°gua suja com gosto de rancor. Seu colega, o ‚ÄúBarista‚Äù oficial, faz piadas √°cidas sobre todos que reclamam. O que voc√™ faz?",
    gif: "gifs/etica_q2.gif",
    answers: [
      { text: "A) Paga um Uber para cada funcion√°rio na cafeteria do shopping.", ethical: false },
      { text: "B) Volta na caixa de caf√© e mistura √°gua de coco para ‚Äúmelhorar o sabor‚Äù sem avisar ningu√©m.", ethical: false },
      { text: "C) Fala no grupo do trabalho: ‚ÄúParab√©ns, Barista, voc√™ transformou caf√© em arma biol√≥gica‚Äù.", ethical: true },
      { text: "D) Pega um copo de caf√© e despeja na mesa dele para demonstrar revolta.", ethical: false }
    ]
  },
  {
    title: "Chefe Atrasado",
    text: "Seu chefe chega atrasado diariamente e aponta o dedo para voc√™ quando algo d√° errado, mas chama voc√™ para carregar caixas pesadas. Como reagir?",
    gif: "gifs/etica_q3.gif",
    answers: [
      { text: "A) Bota o despertador pra tocar a cada 5 minutos at√© mandar um √°udio de madrugada: ‚ÄúChefe, bora acordar?‚Äù.", ethical: false },
      { text: "B) Aguarda o pr√≥ximo erro e fala alto: ‚ÄúClaro, foi tudo culpa do meu atraso imagin√°rio!‚Äù", ethical: true },
      { text: "C) Organiza uma vaquinha para dar um despertador a ele.", ethical: false },
      { text: "D) Torna o supervis√£o 24h no celular: manda relat√≥rios de posi√ß√£o da cama dele.", ethical: false }
    ]
  },
  {
    title: "O Lanche Roubado",
    text: "Voc√™ encontra um pacote de biscoitos escondido na gaveta do colega fissurado em snacks. Algu√©m roubou a sua metade do lanche e voc√™ est√° com fome. Qual a sa√≠da?",
    gif: "gifs/etica_q4.gif",
    answers: [
      { text: "A) Tira foto do pacote e envia editada com filtros dram√°ticos para todos no grupo.", ethical: false },
      { text: "B) Pega apenas um biscoito e deixa o resto como ‚Äúoferta de paz‚Äù.", ethical: false },
      { text: "C) Devolve o pacote sem avisar nada e coloca uma nota: ‚ÄúSinta o sabor da culpa‚Äù.", ethical: true },
      { text: "D) Substitui o estoque por biscoitos horr√≠veis de maisena e espera a vingan√ßa.", ethical: false }
    ]
  },
  {
    title: "Cliente Irritado",
    text: "Um cliente irritado liga gritando que o pedido atrasou e xinga voc√™. Voc√™, internamente, j√° planeja todas as respostas √°cidas. O que faz?",
    gif: "gifs/etica_q5.gif",
    answers: [
      { text: "A) Respira fundo e responde com calma: ‚ÄúPosso ajudar a refazer o pedido?‚Äù, ignorando o tom dele.", ethical: true },
      { text: "B) Telefona de volta fingindo ser um rob√¥ irritado: ‚ÄúDesculpe, s√≥ sirvo caf√© gelado‚Äù.", ethical: false },
      { text: "C) Desliga na cara do cliente e grava o √°udio para usar em stories.", ethical: false },
      { text: "D) Repassa o telefone para o chefe e manda mensagem: ‚ÄúChefe, virou novela mexicana aqui‚Äù.", ethical: false }
    ]
  },
  {
    title: "SOS Plantas",
    text: "Voc√™ descobre que o RH comprou plantas novas, mas ningu√©m rega. As plantas est√£o morrendo mais r√°pido que suas esperan√ßas de promo√ß√£o. Como agir?",
    gif: "gifs/etica_q6.gif",
    answers: [
      { text: "A) Pega um regador e joga √°gua nas plantas dizendo ‚Äúsobrevivam como eu tento sobreviver aqui‚Äù.", ethical: true },
      { text: "B) Substitui as plantas por bonecos de papel e aguarda admira√ß√£o geral pela ‚Äúart installation‚Äù.", ethical: false },
      { text: "C) Envia e-mail para toda a empresa: ‚ÄúSOS Vegeta√ß√£o Corporativa‚Äù.", ethical: false },
      { text: "D) Derruba todas as plantas para que ningu√©m ‚Äúsofra com a morte delas‚Äù de novo.", ethical: false }
    ]
  },
  {
    title: "Sigilo M√©dico",
    text: "Voc√™ √© m√©dico e descobre que um paciente com HIV est√° escondendo essa informa√ß√£o de seu parceiro sexual. O que voc√™ faz?",
    gif: "gifs/etica_q7.gif",
    answers: [
      { text: "A) Respeita o sigilo m√©dico e n√£o diz nada, pois √© direito do paciente.", ethical: false },
      { text: "B) Convoca uma reuni√£o com o paciente para explicar a import√¢ncia de informar o parceiro; se recusar, acaba a consulta.", ethical: true },
      { text: "C) Liga diretamente para o parceiro informando a situa√ß√£o, sem o consentimento do paciente.", ethical: false },
      { text: "D) Espera o paciente sair e manda mensagem an√¥nima ao parceiro.", ethical: false }
    ]
  },
  {
    title: "Fraude Cont√°bil",
    text: "Voc√™ trabalha como auditor e descobre fraudes cont√°beis que beneficiam a empresa, mas prejudicam funcion√°rios. Seu papel exige den√∫ncia. O que voc√™ faz?",
    gif: "gifs/etica_q8.gif",
    answers: [
      { text: "A) Fecha os olhos: ‚Äú√â s√≥ o jeito que as grandes firmas funcionam‚Äù.", ethical: false },
      { text: "B) Informa imediatamente a diretoria e prepara documenta√ß√£o para a den√∫ncia externa, mesmo sabendo que pode perder o emprego.", ethical: true },
      { text: "C) Pega uma porcentagem da diferen√ßa e guarda em um ‚Äúfundo secreto‚Äù enquanto emite relat√≥rios falsos.", ethical: false },
      { text: "D) Finge que n√£o viu e aceita um b√¥nus extra pela ‚Äúboa performance‚Äù nos n√∫meros.", ethical: false }
    ]
  },
  {
    title: "Aluno Colando",
    text: "Voc√™ √© professor e flagra um aluno colando na prova. Ele implora para n√£o estragar seu hist√≥rico. Qual atitude √©tica voc√™ toma?",
    gif: "gifs/etica_q9.gif",
    answers: [
      { text: "A) Anota como se fosse outro aluno e d√° a nota: ‚ÄúSe quer, coloco voc√™ pra outro semestre‚Äù.", ethical: false },
      { text: "B) Aplica uma nota zero e conversa em particular sobre consequ√™ncias e confian√ßa acad√™mica.", ethical: true },
      { text: "C) Deixa passar porque ‚Äútodo mundo cola uma vez na vida‚Äù.", ethical: false },
      { text: "D) Recompensa o esfor√ßo dele dizendo que aprendeu a copiar bem.", ethical: false }
    ]
  },
  {
    title: "Falha Estrutural",
    text: "Voc√™ √© engenheiro respons√°vel por projeto estrutural e percebe falha grave que s√≥ ser√° corrigida ap√≥s obra pronta. Isso implica custo alt√≠ssimo. O que faz?",
    gif: "gifs/etica_q10.gif",
    answers: [
      { text: "A) Ignora a falha para economizar e troca o laudo por uma ‚Äúavalia√ß√£o secund√°ria‚Äù.", ethical: false },
      { text: "B) Informar ao cliente e interromper imediatamente a obra, mesmo sabendo que isso pode falir a empresa.", ethical: true },
      { text: "C) Ajusta o projeto na calada da noite sem comunicar ningu√©m, ‚Äútorcendo‚Äù para que ningu√©m note.", ethical: false },
      { text: "D) Sugere cobrir o defeito com painel decorativo e esperar que o ‚Äúpeso disfarce o problema‚Äù.", ethical: false }
    ]
  },
  {
    title: "Atestado Falso",
    text: "Seu amigo pede que voc√™ falsifique atestado m√©dico para ele faltar a uma audi√™ncia judicial. Ele alega ser ‚Äúinjusti√ßa‚Äù. Como age?",
    gif: "gifs/etica_q11.gif",
    answers: [
      { text: "A) Imprime atestado vazio e manda ele assinar.", ethical: false },
      { text: "B) Negocia para que ele compare√ßa e enfrente as consequ√™ncias, explicando que falsificar documento √© crime.", ethical: true },
      { text: "C) Diz que est√° sem impressora e entrega uma declara√ß√£o desenhada √† m√£o.", ethical: false },
      { text: "D) Concorda, mas coloca um QR code que leva ao site da PF, assim ‚Äúfica divertido‚Äù.", ethical: false }
    ]
  },
  {
    title: "Medicamento com Problema",
    text: "Voc√™ trabalha em laborat√≥rio e descobre que um estudo patrocinado pela empresa omitiu efeitos colaterais graves de um medicamento. O p√∫blico pode se machucar. O que faz?",
    gif: "gifs/etica_q12.gif",
    answers: [
      { text: "A) Lan√ßa um e-mail an√¥nimo para a imprensa revelando tudo, sem verificar as fontes.", ethical: false },
      { text: "B) Comunica a equipe de pesquisa, demanda que corrijam o estudo e notifica √≥rg√£os reguladores.", ethical: true },
      { text: "C) Fura os frascos de rem√©dio para ‚Äúsuspender a produ√ß√£o‚Äù e depois diz que foi ‚Äúacidente‚Äù.", ethical: false },
      { text: "D) Vende os dados para concorrentes, pois ‚Äúpoder p√∫blico n√£o faz nada mesmo‚Äù.", ethical: false }
    ]
  },
  {
    title: "Dilema da Promo√ß√£o",
    text: "Voc√™ √© gestor e precisa escolher entre promover um funcion√°rio competente, mas com comportamento desleal, ou outro menos qualificado, por√©m √≠ntegro. Ambos disputam a mesma vaga. O que decide?",
    gif: "gifs/etica_q13.gif",
    answers: [
      { text: "A) Promove o competente, pois ‚Äúresultados justificam meios‚Äù e depois tenta ‚Äúcorrigir‚Äù o comportamento.", ethical: false },
      { text: "B) Prefere o menos qualificado com integridade, pois confian√ßa √© valor essencial para equipe.", ethical: true },
      { text: "C) Chama uma reuni√£o e deixa que os pr√≥prios funcion√°rios votem quem merece mais.", ethical: false },
      { text: "D) Cria uma ‚Äúpromo√ß√£o fantasma‚Äù e n√£o promove ningu√©m para evitar problemas.", ethical: false }
    ]
  }
];
];



// Fun√ß√µes do sistema de perfil
function loadProfile() {
  const savedProfile = localStorage.getItem('profile');
  if (savedProfile) currentProfile = savedProfile;
  document.getElementById('profileImage').src = PROFILE_IMAGES[currentProfile];
  updateScoreDisplay();
}

function showProfileSelection() {
  document.getElementById("menu").classList.add("hidden");
  document.getElementById("profileSelection").classList.remove("hidden");
}

function hideProfileSelection() {
  document.getElementById("profileSelection").classList.add("hidden");
  document.getElementById("menu").classList.remove("hidden");
}

function selectProfile(profileId) {
  currentProfile = profileId;
  localStorage.setItem('profile', profileId);
  document.getElementById('profileImage').src = PROFILE_IMAGES[profileId];
  hideProfileSelection();
}

// Fun√ß√µes do jogo principal
function startGame() {
  document.getElementById("menu").classList.add("hidden");
  document.getElementById("game").classList.remove("hidden");
  currentQuestion = 0;
  score = 0;
  showQuestion();
}

function showQuestion() {
  const question = questions[currentQuestion];
  document.getElementById("questionNumber").textContent = currentQuestion + 1;
  document.getElementById("questionTitle").textContent = question.title;
  document.getElementById("questionText").textContent = question.text;
  document.getElementById("questionGif").src = question.gif;
  
  const answersDiv = document.getElementById("answers");
  answersDiv.innerHTML = "";
  question.answers.forEach(answer => {
    const btn = document.createElement("button");
    btn.className = "btn";
    btn.textContent = answer.text;
    btn.onclick = () => selectAnswer(answer.ethical);
    answersDiv.appendChild(btn);
  });
}

function selectAnswer(isEthical) {
  if (isEthical) score += POINTS_PER_CORRECT;
  currentQuestion++;
  if (currentQuestion < questions.length) {
    showQuestion();
  } else {
    showResult();
  }
}

function showResult() {
  // Atualiza placar
  lastScore = score;
  if (score > highScore) {
    highScore = score;
    localStorage.setItem('highScore', highScore);
  }
  localStorage.setItem('lastScore', lastScore);
  
  // Mostra resultados
  document.getElementById("game").classList.add("hidden");
  document.getElementById("result").classList.remove("hidden");
  
  // Atualiza avatar
  document.getElementById("resultAvatar").src = PROFILE_IMAGES[currentProfile];
  
  const totalPoints = questions.length * POINTS_PER_CORRECT;
  
  // Anima a pontua√ß√£o
  animateValue("finalScoreValue", 0, score, 1000);
  document.getElementById("totalPossibleScore").textContent = totalPoints;
  document.getElementById("highScoreDisplay").textContent = highScore;
  
  // Anima a barra de progresso
  const percentage = (score / totalPoints) * 100;
  setTimeout(() => {
    document.getElementById("scoreProgress").style.width = `${percentage}%`;
  }, 300);
  
  // Mensagem de desempenho
  let message = "";
  if (percentage >= 90) message = "‚ú® √âtica Impec√°vel! Voc√™ √© um exemplo no ambiente de trabalho.";
  else if (percentage >= 70) message = "üîé Excelente! Suas decis√µes s√£o quase sempre corretas.";
  else if (percentage >= 50) message = "‚ö° Bom trabalho! Algumas escolhas poderiam ser melhores.";
  else if (percentage >= 30) message = "‚ö†Ô∏è Aten√ß√£o! Revise seus conceitos sobre √©tica profissional.";
  else message = "üö® Alerta! Suas decis√µes precisam de uma revis√£o urgente.";
  
  document.getElementById("finalMessage").textContent = message;
  
  // Atualiza display no menu tamb√©m
  updateScoreDisplay();
}

// Fun√ß√£o para animar n√∫meros
function animateValue(id, start, end, duration) {
  const obj = document.getElementById(id);
  let startTimestamp = null;
  const step = (timestamp) => {
    if (!startTimestamp) startTimestamp = timestamp;
    const progress = Math.min((timestamp - startTimestamp) / duration, 1);
    obj.textContent = Math.floor(progress * (end - start) + start);
    if (progress < 1) {
      window.requestAnimationFrame(step);
    }
  };
  window.requestAnimationFrame(step);
}

// Fun√ß√µes de navega√ß√£o
function showInstructions() {
  document.getElementById("menu").classList.add("hidden");
  document.getElementById("instructions").classList.remove("hidden");
}

function backToMenu() {
  document.getElementById("instructions").classList.add("hidden");
  document.getElementById("result").classList.add("hidden");
  document.getElementById("game").classList.add("hidden");
  document.getElementById("profileSelection").classList.add("hidden");
  document.getElementById("menu").classList.remove("hidden");
  updateScoreDisplay();
}

// Fun√ß√£o para atualizar o placar
function updateScoreDisplay() {
  document.getElementById('highScoreValue').textContent = highScore;
  document.getElementById('lastScoreValue').textContent = lastScore;
}

window.onload = function() {
  loadProfile();
  updateMultiplierDisplay();
};

localStorage.setItem("score_empatia", highScore);

</script>
</body>
</html>